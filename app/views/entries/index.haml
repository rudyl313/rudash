:javascript
  (function($) {
    $(function(){
      $(".date_container").click(function(){
        $("#add_entry_controls").hide();
        $(".entry_controls",$(this).parent()).append($("#add_entry_controls"));
        $("#add_entry_controls").show();
        $("#submit_new_entry").click(function(e){
          e.preventDefault();
          var $group = $(this).parent().parent().parent();
          $.ajax({
            url : $(this).attr("data-path"),
            type : 'POST',
            data : {
              entry : {
                due_time : $("#entry_time_field").val(),
                due_date : $group.attr("data-date"),
                content : $("#entry_content_field").val()
              }
            },
            success : function(data,x,y){
              $("#add_entry_controls").slideUp();
              $(".entry_list",$group).slideUp();
              $(".entry_list",$group).html(data);
              $(".entry_list",$group).slideDown();
              $("#entry_content_field").val("");
              $("#entry_time_field").val("");
            }
          });
        });
      });
    });
  })(jQuery);

%script
  ="var create_entry_path = '#{}'"

%h1="To Do List"
%div#add_entry_controls{:style => "display:none;"}
  = "Time"
  = text_field_tag("entry_time_field")
  = "Content"
  = text_field_tag("entry_content_field")
  = submit_tag("Add", :id => "submit_new_entry", :"data-path" => user_entries_path(current_user) )
- @dates.each do |date|
  - datestr = date.strftime("%d-%m-%Y")
  .date_group{:"data-date" => datestr}
    .date_container
      %h3= date_label(date)
    .entry_controls
    .entry_list
      = render :partial => "entry_list", :locals => {:date => date}



